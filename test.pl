use utf8;
use strict;

sub main {
	require 'trip.cgi';
	binmode(STDOUT);
	binmode(STDOUT, ':encoding(cp932)');
	test('1',
		'tsGpSwX8mo',
		'tsGpSwX8mo',
		'tsGpSwX8mo',
		'tsGpSwX8mo',
		'tsGpSwX8mo',
		'tsGpSwX8mo',
		'tsGpSwX8mo',
	);
	test('12345678',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
	);
	test('ｱ23ｴｵｶｷｸ',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'XrlOBrDwyU',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
	);
	test('ｱｲｳｴｵｶｷｸ',
		'XlUiP8mHCU',
		'XlUiP8mHCU',
		'XlUiP8mHCU',
		'xmvISdVBK2',
		'XlUiP8mHCU',
		'XlUiP8mHCU',
		'XlUiP8mHCU',
	);
	test('ｋａｍｉ',
		'yGAhoNiShI',
		'yGAhoNiShI',
		'yGAhoNiShI',
		'eRrBb7O29A',
		'yGAhoNiShI',
		'yGAhoNiShI',
		'yGAhoNiShI',
	);
	test('#828b8281828d8289',
		'yGAhoNiShI',
		'yGAhoNiShI',
		'yGAhoNiShI',
		'NXUZ00CMW6',
		'NXUZ00CMW6',
		'yGAhoNiShI',
		'yGAhoNiShI',
	);
	test('#828b8281828d8289.',
		'yGAhoNiShI',
		'yGAhoNiShI',
		'yGAhoNiShI',
		'NXUZ00CMW6',
		'NXUZ00CMW6',
		'yGAhoNiShI',
		'yGAhoNiShI',
	);
	test('#828b8281828d8289..',
		'yGAhoNiShI',
		'yGAhoNiShI',
		'yGAhoNiShI',
		'NXUZ00CMW6',
		'NXUZ00CMW6',
		'yGAhoNiShI',
		'yGAhoNiShI',
	);
	test('騨ﾚNWKJ諤',
		'YYYYYYYYYY',
		'YYYYYYYYYY',
		'YYYYYYYYYY',
		'lOOFR1xhP.',
		'YYYYYYYYYY',
		'YYYYYYYYYY',
		'YYYYYYYYYY',
	);
	test('#3132333435363738',
		'XlUiP8mHCU',
		'XlUiP8mHCU',
		'XlUiP8mHCU',
		'ULUFJt9VDM',
		'ULUFJt9VDM',
		'XlUiP8mHCU',
		'XlUiP8mHCU',
	);
	test('#31323334353637382',
		'1tWQFkUcLU',
		'1tWQFkUcLU',
		'1tWQFkUcLU',
		'ULUFJt9VDM',
		'ULUFJt9VDM',
		'1tWQFkUcLU',
		'1tWQFkUcLU',
	);
	test('#313233343536373823',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'ULUFJt9VDM',
		'ULUFJt9VDM',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
	);
	test('#3100000000000000H.',
		'tsGpSwX8mo',
		'tsGpSwX8mo',
		'tsGpSwX8mo',
		'6O5ptllf5k',
		'6O5ptllf5k',
		'tsGpSwX8mo',
		'tsGpSwX8mo',
	);
	test('123456789',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
	);
	test('1234567890',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
	);
	test('12345678901',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
	);
	test('123456789012',
		'jZk8zfYo4m4X',
		'jZk8zfYo4m4X',
		'jZk8zfYo4m4X',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'jZk8zfYo4m4X',
		'jZk8zfYo4m4X',
	);
	test('1234567890123',
		'CNfebL9sP6Ci',
		'CNfebL9sP6Ci',
		'CNfebL9sP6Ci',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'CNfebL9sP6Ci',
		'CNfebL9sP6Ci',
	);
	test('あいうえおか',
		'N0mUb9Yq8DyS',
		'N0mUb9Yq8DyS',
		'N0mUb9Yq8DyS',
		'hhorpR4oiM',
		'AU/OjWxByc',
		'N0mUb9Yq8DyS',
		'N0mUb9Yq8DyS',
	);
	test('$2345678901',
		'BaNAE36vrg',
		'BaNAE36vrg',
		'BaNAE36vrg',
		'BaNAE36vrg',
		'BaNAE36vrg',
		'BaNAE36vrg',
		'BaNAE36vrg',
	);
	test('$23456789012',
		'???',
		'4QKLUa.0a8HzwPe',
		'???',
		'BaNAE36vrg',
		'BaNAE36vrg',
		'???',
		'???',
	);
	test('$..........2',
		'???',
		'RqK!0i.t49rNji7',
		'???',
		'bwOnxXJup.',
		'bwOnxXJup.',
		'???',
		'???',
	);
	test('$｡3456789012',
		'???',
		'ｾﾍｵﾏﾝｷｩｳﾚﾔ･ｴﾋ･ｴ',
		'???',
		'3A/Hqpzc9c',
		'RhQIlLvzs6',
		'???',
		'???',
	);
	test('$｡1008343131',
		'???',
		'ﾃｽﾄ!ｹﾏﾜｬｴ･ｧﾎﾖｲﾎ',
		'???',
		'hkjDnZZGPM',
		'lEjCdVtEDo',
		'???',
		'???',
	);
	test('$ｱｲｳｴｵｱｲｳｴｵｱｲｳｴｵ',
		'???',
		'ｳﾟｾﾉｪ｣ﾈﾊﾍｬﾏﾟｦｳｹ',
		'???',
		'OS8Cx1YIIk',
		'Nxf9REt3eA',
		'???',
		'???',
	);
	test('#23456789012',
		'???',
		'???',
		'???',
		'y3.ScW8dbE',
		'y3.ScW8dbE',
		'???',
		'???',
	);
	test('#1234567890123456..abc',
		'???',
		'???',
		'???',
		'Oi/x1UMuw.',
		'Oi/x1UMuw.',
		'???',
		'???',
	);
	test('ホムホム',
		'QD4TDVpNOM',
		'L809q.Wvdk',
		'L809q.Wvdk',
		'C93qWoB2hg',
		'L809q.Wvdk',
		'L809q.Wvdk',
		'QD4TDVpNOM',
	);
	test('#837a8380837a8380z.',
		'QD4TDVpNOM',
		'L809q.Wvdk',
		'L809q.Wvdk',
		'RzVraEhVVs',
		'RzVraEhVVs',
		'L809q.Wvdk',
		'QD4TDVpNOM',
	);
	test('◆●★',
		'dTHrbNrOw.',
		'dTHrbNrOw.',
		'RNM4OlZz7s',
		'yNZt80OfCs',
		'YZQgr.7WNI',
		'dTHrbNrOw.',
		'dTHrbNrOw.',
	);
	test('■▲▼',
		'GExJOqup6A',
		'GExJOqup6A',
		'MOZcYuJkdU',
		'qkC5YKQWyg',
		'GExJOqup6A',
		'GExJOqup6A',
		'GExJOqup6A',
	);
	test('◆★',
		'9hhQmDPmK2',
		'9hhQmDPmK2',
		'DVlEzgbdkE',
		'pF26cWkf/Q',
		'wJ5itNiesE',
		'9hhQmDPmK2',
		'9hhQmDPmK2',
	);
	test('<>"&',
		'f0abm3NbDw',
		'f0abm3NbDw',
		'7gGRCKani97t',
		'Gw/f5wZwNg',
		'Gw/f5wZwNg',
		'7gGRCKani97t',
		'f0abm3NbDw',
	);
	test('<>',
		'3wNccY4njg',
		'3wNccY4njg',
		'Gw/f5wZwNg',
		'Gw/f5wZwNg',
		'Gw/f5wZwNg',
		'Gw/f5wZwNg',
		'3wNccY4njg',
	);
	test('"',
		'4eqVTkonjE',
		'4eqVTkonjE',
		'gt1azVccY2',
		'gt1azVccY2',
		'gt1azVccY2',
		'gt1azVccY2',
		'4eqVTkonjE',
	);
	test("'",
		'8/08awL.AE',
		'8/08awL.AE',
		'HA0pkXpKB6',
		'UtX4XpdDog',
		'8/08awL.AE',
		'HA0pkXpKB6',
		'8/08awL.AE',
	);
	test("&",
		'2r2Ga7GHRc',
		'2r2Ga7GHRc',
		'2r2Ga7GHRc',
		'MhCJJ7GVT.',
		'2r2Ga7GHRc',
		'2r2Ga7GHRc',
		'2r2Ga7GHRc',
	);
	test('1234567&',
		'q3.yfaIC5s',
		'q3.yfaIC5s',
		'q3.yfaIC5s',
		'q3.yfaIC5s',
		'q3.yfaIC5s',
		'q3.yfaIC5s',
		'q3.yfaIC5s',
	);
	test('1234567"',
		'4qJVtuc8yc',
		'4qJVtuc8yc',
		'DWQ0QMJveuYp',
		'q3.yfaIC5s',
		'q3.yfaIC5s',
		'DWQ0QMJveuYp',
		'4qJVtuc8yc',
	);
	test('＃',
		'u2YjtUz8MU',
		'68NHrw0u9M',
		'e57oZ1fb1o',
		'By6DvOdjOA',
		'u2YjtUz8MU',
		'e57oZ1fb1o',
		'u2YjtUz8MU',
	);
	test(' ＃',
		'68NHrw0u9M',
		'g3.NWF1Chs',
		'PlnfWZhzek',
		'.Agbc1OR8c',
		'68NHrw0u9M',
		'PlnfWZhzek',
		'68NHrw0u9M',
	);
	test('＃＃',
		'xSK1SiC5MI',
		'wOlE71ViKc',
		'dn4m8J5vno',
		'8SjNjRYO8U',
		'xSK1SiC5MI',
		'dn4m8J5vno',
		'48cw0iifQw',
	);
	test('＝煤＃',
		'0ZaZ6Ph9YM',
		'8Ifcd5IMRw',
		'pnkCIOJmhY',
		'u/UThijc9k',
		'0ZaZ6Ph9YM',
		'pnkCIOJmhY',
		'0ZaZ6Ph9YM',
	);
	test('123456789012＃',
		'RITzbxS2I3J9',
		'aKqOHnvuUtkd',
		'.sf3a0vVPg6Q',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'.sf3a0vVPg6Q',
		'RITzbxS2I3J9',
	);
	test('1234567890＃',
		'WBRXcNtpf.',
		'.oWZrnJVutMW',
		'VIJJSV7/Fqfl',
		'WBRXcNtpf.',
		'WBRXcNtpf.',
		'VIJJSV7/Fqfl',
		'WBRXcNtpf.',
	);
	test('＃3456789012',
		'lg6Q/4u.i.',
		'VlTC9VCYT7DD',
		'fbYpKBXnp7Oj',
		'p2nGyNlkqo',
		'lg6Q/4u.i.',
		'fbYpKBXnp7Oj',
		'lg6Q/4u.i.',
	);
	test('＃31318194313100001.',
		'7ZE59iVq1I',
		'j6J/iuF0lYOO',
		'f9AYGqFM9G6T',
		'wHuJ.Rjqa2',
		'JFUJu00dRM',
		'f9AYGqFM9G6T',
		'7ZE59iVq1I',
	);
	test('＝噤＝氈',
		'Pcn5KeK8IQ',
		'Pcn5KeK8IQ',
		'Pcn5KeK8IQ',
		'cZaFShsneI',
		'Pcn5KeK8IQ',
		'Pcn5KeK8IQ',
		'Pcn5KeK8IQ',
	);
	test('fusianasan',
		'M2TLe2H2No',
		'M2TLe2H2No',
		'M2TLe2H2No',
		'M2TLe2H2No',
		'M2TLe2H2No',
		'M2TLe2H2No',
		'M2TLe2H2No',
	);
	test('①Ⅰ㍉㈱',
		'Az6yZqa0I2',
		'Az6yZqa0I2',
		'Vyfxi/dpqw',
		'e3LOKfsWv2',
		'Az6yZqa0I2',
		'Az6yZqa0I2',
		'Az6yZqa0I2',
	);
	test('～',
		'Fg7tQabTMc',
		'Fg7tQabTMc',
		'cPUZU5OGFs',
		'2nUHWotKCQ',
		'Fg7tQabTMc',
		'Fg7tQabTMc',
		'Fg7tQabTMc',
	);
	test('一一',
		'b3B4i2sLpY',
		'b3B4i2sLpY',
		'b3B4i2sLpY',
		'VAhc1fHCZ2',
		'b3B4i2sLpY',
		'b3B4i2sLpY',
		'b3B4i2sLpY',
	);
	test('0 !',
		'ZIJx7G/pyg',
		'ZIJx7G/pyg',
		'ZIJx7G/pyg',
		'JB1xkjXQ86',
		'ZIJx7G/pyg',
		'ZIJx7G/pyg',
		'ZIJx7G/pyg',
	);
	test('0-:',
		'NE0mkZ2TpI',
		'NE0mkZ2TpI',
		'NE0mkZ2TpI',
		'tHGdgYtE5Y',
		'NE0mkZ2TpI',
		'NE0mkZ2TpI',
		'NE0mkZ2TpI',
	);
	test('0@[',
		'gkmryCvLz6',
		'gkmryCvLz6',
		'gkmryCvLz6',
		'gkmryCvLz6',
		'gkmryCvLz6',
		'gkmryCvLz6',
		'gkmryCvLz6',
	);
	test('0`{',
		'WtDsB59Wrk',
		'WtDsB59Wrk',
		'WtDsB59Wrk',
		'WtDsB59Wrk',
		'WtDsB59Wrk',
		'WtDsB59Wrk',
		'WtDsB59Wrk',
	);
	test('0|}',
		'M6kra150Vk',
		'M6kra150Vk',
		'M6kra150Vk',
		'M6kra150Vk',
		'M6kra150Vk',
		'M6kra150Vk',
		'M6kra150Vk',
	);
	test("0\x090",
		'sXoB65CSvY',
		'sXoB65CSvY',
		'/lQMO72QVo',
		'sXoB65CSvY',
		'OeKveLL.YQ',
		'sXoB65CSvY',
		'sXoB65CSvY',
	);
}

sub test {
	my ($key, @expects) = @_;
	my @modes = qw(net sc open next strb vips 0chp);
	my @results = ();
	for my $i (0 .. $#modes) {
		my ($result, undef, undef, undef, undef) = trip($key, $modes[$i]);
		$results[$i] = $result;
		if ($results[$i] ne $expects[$i]) {
		print "key #$key\n";
		print "  mode $modes[$i]\n";
		print "  result $results[$i]\n";
		print "  expect $expects[$i]\n";
		}
	}
}

exit(main()) if (!defined caller);
